<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/
..\FrameXML\UI.xsd">

	<Frame name="SHADOWPAD_FRAME" inherits="SecureStateHeaderTemplate" parent="UIParent" clampedToScreen="true" frameStrata="LOW" movable="true">
		<Anchors>
			<Anchor point="CENTER">
				<Offset><AbsDimension x="0" y="0" /></Offset>
			</Anchor>
		</Anchors>
		<Size>
			<AbsDimension x="327" y="222" />
		</Size>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="SHADOWPAD_BACKGROUND" hidden="true">
					<Size>
						<AbsDimension x="36" y="36" />
					</Size>
					<Color r="0" g="0" b="0" a=".5" />
				</Texture>
			</Layer>
		</Layers>
		<Frames>
			<CheckButton name="SHADOWPAD_BUTTON_F1" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT">
						<Offset>
							<AbsDimension x="22" y="-4" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_F2" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_F1" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_F3" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_F2" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_F4" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_F3" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_F5" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_F4" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_1" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_F1" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="-52" y="-44" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_2" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_1" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_3" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_2" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_4" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_3" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_5" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_4" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_Q" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_1" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="-28" y="-44" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_W" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_Q" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_E" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_W" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_R" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_E" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_T" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_R" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_A" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_Q" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="-32" y="-44" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_S" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_A" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_D" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_S" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_F" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_D" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_G" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_F" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_H" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_G" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_Z" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_A" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="-32" y="-44" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_X" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_Z" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_C" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_X" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_V" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_C" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_B" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_V" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_N" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_B" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
			<CheckButton name="SHADOWPAD_BUTTON_M" inherits="ActionBarButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="SHADOWPAD_BUTTON_N" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="8" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
			</CheckButton>
		</Frames>
		<Scripts>
			<OnLoad>
				this:RegisterEvent("PLAYER_ENTERING_WORLD");
				this:RegisterEvent("UNIT_AURA");
			</OnLoad>
			<OnEvent>
				if ( event == "PLAYER_ENTERING_WORLD" ) then
					MainMenuBar:Hide();
					ShadowPad_SetBindings();
				--	DEFAULT_CHAT_FRAME:AddMessage("spDebug: PLAYER_ENTERING_WORLD event toggles");
				end
				local stance = GetShapeshiftForm();
				if ( stance == 1 ) then
					if ( UnitAura("player", SHADOWPAD_SHADOWDANCE) ) then
						ShadowPad_BuildButtons(2); --3rd stance if with shadowdance and in stealth
					--	DEFAULT_CHAT_FRAME:AddMessage("spDebug: u r in stealth; sd is active;");
					else
						ShadowPad_BuildButtons(1); --2nd stance if without shadowdance and in stealth
					--	DEFAULT_CHAT_FRAME:AddMessage("spDebug: u r in stealth;");
					end
				else
					if ( UnitAura("player", SHADOWPAD_SHADOWDANCE) ) then
						ShadowPad_BuildButtons(2); --3rd stance if with shadowdance and not in stealth
					--	DEFAULT_CHAT_FRAME:AddMessage("spDebug: u r not in stealth; sd is active;");
					else
						ShadowPad_BuildButtons(0); --1st stance if without shadowdance and not in stealth
					--	DEFAULT_CHAT_FRAME:AddMessage("spDebug: u r not in stealth;");
					end
				end
			</OnEvent>
			<OnMouseDown>
				if ( button == "LeftButton" ) then
					self:StartMoving()
					SHADOWPAD_BACKGROUND:Show();
				end
			</OnMouseDown>
			<OnMouseUp>
				self:StopMovingOrSizing()
				SHADOWPAD_BACKGROUND:Hide();
			</OnMouseUp>
		</Scripts>
	</Frame>
	
</Ui>
